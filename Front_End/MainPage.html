<!DOCTYPE html>
<html>
<title>IMS</title>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
<style type="text/css">
.button 
{
  border: 1px solid #0a3c59;
  background: #156bad;
  background: -webkit-gradient(linear, left top, left bottom, from(#2195f3), to(#156bad));
  background: -webkit-linear-gradient(top, #2195f3, #156bad);
  background: -moz-linear-gradient(top, #2195f3, #156bad);
  background: -ms-linear-gradient(top, #2195f3, #156bad);
  background: -o-linear-gradient(top, #2195f3, #156bad);
  background-image: -ms-linear-gradient(top, #2195f3 0%, #156bad 100%);
  padding: 10.5px 21px;
  -webkit-border-radius: 6px;
  -moz-border-radius: 6px;
  border-radius: 6px;
  -webkit-box-shadow: rgba(255,255,255,0.4) 0 1px 0, inset rgba(255,255,255,0.4) 0 1px 0;
  -moz-box-shadow: rgba(255,255,255,0.4) 0 1px 0, inset rgba(255,255,255,0.4) 0 1px 0;
  box-shadow: rgba(255,255,255,0.4) 0 1px 0, inset rgba(255,255,255,0.4) 0 1px 0;
  text-shadow: #7ea4bd 0 1px 0;
  color: #ffffff;
  font-size: 14px;
  font-family: helvetica, serif;
  text-decoration: none;
  vertical-align: middle;
}
.button:hover 
{
  border: 1px solid #0a3c59;
  text-shadow: #1e4158 0 1px 0;
  background: #156bad;
  background: -webkit-gradient(linear, left top, left bottom, from(#2195f3), to(#156bad));
  background: -webkit-linear-gradient(top, #2195f3, #156bad);
  background: -moz-linear-gradient(top, #2195f3, #156bad);
  background: -ms-linear-gradient(top, #2195f3, #156bad);
  background: -o-linear-gradient(top, #2195f3, #156bad);
  background-image: -ms-linear-gradient(top, #2195f3 0%, #156bad 100%);
  color: #000000;
}
.button:active 
{
  text-shadow: #1e4158 0 1px 0;
  border: 1px solid #0a3c59;
  background: #2195f3;
  background: -webkit-gradient(linear, left top, left bottom, from(#156bad), to(#156bad));
  background: -webkit-linear-gradient(top, #156bad, #2195f3);
  background: -moz-linear-gradient(top, #156bad, #2195f3);
  background: -ms-linear-gradient(top, #156bad, #2195f3);
  background: -o-linear-gradient(top, #156bad, #2195f3);
  background-image: -ms-linear-gradient(top, #156bad 0%, #2195f3 100%);
  color: #000000;
}
#id_search_bar
{
  width:500px;
  height:40px;
  color:black;
}
table 
{
 	table-layout: fixed;
}
table td:nth-child(7) 
{
 	word-wrap: break-word;
 	width: 50%;
 	max-width: 1px;
}
#table-wrapper 
{
 	position:relative;
}
#table-scroll 
{
 	height:175px;
 	overflow:auto;  
 	margin-top:20px;
}
#table-wrapper table 
{
 	width:100%;
}
#table-wrapper table thead th .text 
{
	position:absolute;   
 	top:-20px;
 	z-index:2;
 	height:20px;
 	width:35%;
 	border:1px solid red;
}
textarea 
{
  resize: none;
  color:black;
}
th
{
  cursor:pointer;
}

</style>

<script>

/****************************************************************
Function:  populateForms()
Description: This function run all data retrieval functions so 
that all data fields are populated on page load.  Also gets a 
SID from the server
*****************************************************************/
function populateForms()
{
	setSID();
	cdm_getClassData();
	loadBrowser();
	elm_getEmailList();
	loadLog();
}

/****************************************************************
Function:  getSID()
Description: Gets a SID from the server and creates a local cookie.
*****************************************************************/
function setSID()
{

  var xhttp = new XMLHttpRequest(); 
  xhttp.open("POST", "GenerateSID.php", false);
  xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xhttp.send(); 
  
  
  var SIDResponse = xhttp.responseText;

  if(SIDResponse == "SIDError")
  {
    IMSError("setSID Error","SID Missing.");
	return;
  }
	
  document.cookie=SIDResponse;

  document.getElementById("id_main_SIDDisplay").innerHTML = SIDResponse;

  
  return;
  
}

function getSID()
{
  return document.cookie;
}


function loadBrowser()
{

  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() 
  {
    if (xhttp.readyState == 4 && xhttp.status == 200) 
    {
      parseXMLResponse(xhttp);
    }
  };
  xhttp.open("POST", "RetrieveBrowserData.php", true);
  xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xhttp.send("SID="+getSID()); 
}

function loadLog()
{


  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() 
  {
    if (xhttp.readyState == 4 && xhttp.status == 200) 
    {
      parseXMLResponse(xhttp);
    }
  };
  xhttp.open("POST", "RetrieveLog.php", true);
  xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xhttp.send("SID="+getSID()+"&LogLevel=All"); 
}

/****************************************************************
Function:  search_showAutocomplete()
Description: Creates a datalist to show all autocomplete matches
for a partial search string.
*****************************************************************/
function search_showAutocomplete(partialStr)
{


  //Check for a selection	
  //from http://stackoverflow.com/questions/30022728/perform-action-when-clicking-html5-datalist-option
  var val = document.getElementById("id_search_bar").value;
  var opts = document.getElementById('id_search_queryList').childNodes;
  
  if(val == "") //blank or removed entry, delete the datalist.
  {
    document.getElementById("id_search_queryList").innerHTML = "";
	return;
  }
  
  for (var i = 0; i < opts.length; i++) 
  {
	if (opts[i].value === val) 
	{
	  // An item was selected from the list!
	  //Remove datalists and launch item load functions.
	  document.getElementById("id_cdm_partList").innerHTML = "";
      document.getElementById("id_search_queryList").innerHTML = "";
	  getQuickUpdateData(val);
	  return;
	}
  }
  
  sendBackendRequest("QueryAutocomplete.php","SID="+getSID()+"&Filter="+ partialStr);
  return;
}


/****************************************************************
Function:  getQuickUpdateData()
Description: Requests data for a single item number.
*****************************************************************/
function getQuickUpdateData(partNumber)
{
  sendBackendRequest("RetrieveItemData.php","SID="+getSID()+"&PartNumber="+ partNumber);
  
  return;
}



/****************************************************************
Function:  createNewItem()
Description: Sends new Item data to the server for saving. 
Synchronous mode is used to ensure previous processes are completed
before the next is started. 
*****************************************************************/
function createNewItem()
{


  //Input Verification code goes here.
  var partNumber = document.getElementById("id_cvm_itemNumber").value;
  var qty = document.getElementById("id_cvm_qty").value;
  var threshold = document.getElementById("id_cvm_thresh").value;
  var location = document.getElementById("id_cvm_location").value;
  var description = document.getElementById("id_cvm_desc").value;
  var type = document.getElementById("id_cvm_type").value;
  var value = document.getElementById("id_cvm_value").value;
  var supplierName = document.getElementById("id_cvm_supplierName").value;
  var supplierPN = document.getElementById("id_cvm_supplierPN").value;
  var link = document.getElementById("id_cvm_link").value;
	
  //Create new Item record
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() 
  {
    if (xhttp.readyState == 4 && xhttp.status == 200) 
    {
      parseXMLResponse(xhttp);
    }
  };
  
  xhttp.open("POST", "CreateNewItem.php", false);
  xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xhttp.send("SID="+getSID()+"&PartNumber="+partNumber); 
  
  var returnVal = parseXMLResponse(xhttp);
  
  if(returnVal == false)
  {
	alert("Part Number Creation Error");
	return;
  }
	
  

  if(qty != "")
  {  
    xhttp.open("POST", "ModifyItem.php", false);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");  
	xhttp.send("SID="+getSID()+"&PartNumber="+partNumber+"&Field=Quantity&Value="+qty);
  }
  
  
  
  if(threshold != "")
  {  
    xhttp.open("POST", "ModifyItem.php", false);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
	xhttp.send("SID="+getSID()+"&PartNumber="+partNumber+"&Field=Ordering_Threshold&Value="+threshold);
  }

  
  if(location != "")
  {  
    xhttp.open("POST", "ModifyItem.php", false);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
	xhttp.send("SID="+getSID()+"&PartNumber="+partNumber+"&Field=Location&Value="+location);
  }
  
  if(description != "")
  {  
    xhttp.open("POST", "ModifyItem.php", false);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
	xhttp.send("SID="+getSID()+"&PartNumber="+partNumber+"&Field=Description&Value="+description);
  }
  
  if(type != "")
  {  
    xhttp.open("POST", "ModifyItem.php", false);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
	xhttp.send("SID="+getSID()+"&PartNumber="+partNumber+"&Field=Type&Value="+type);
  }
  
  if(value != "")
  {  
    xhttp.open("POST", "ModifyItem.php", false);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
	xhttp.send("SID="+getSID()+"&PartNumber="+partNumber+"&Field=Value&Value="+value);
  }
  
  if(supplierName != "")
  { 
    xhttp.open("POST", "ModifyItem.php", false);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
	xhttp.send("SID="+getSID()+"&PartNumber="+partNumber+"&Field=Suppliers_Name&Value="+supplierName);
  }
  
  if(supplierPN != "")
  {  
    xhttp.open("POST", "ModifyItem.php", false);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
	xhttp.send("SID="+getSID()+"&PartNumber="+partNumber+"&Field=Supplier_Part_Number&Value="+supplierPN);
  }
  
  if(link != "")
  {  
    xhttp.open("POST", "ModifyItem.php", false);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
	xhttp.send("SID="+getSID()+"&PartNumber="+partNumber+"&Field=Item_Link&Value="+link);
  }
  
}

/****************************************************************
Function:  sendBackendRequest()
Description: Sets up and sends a XMLHttpRequest in POST mode to 
a specified PHP script.
*****************************************************************/
function sendBackendRequest(PHPscript,postOptions)
{
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() 
  {
    if (xhttp.readyState == 4 && xhttp.status == 200) 
    {
      parseXMLResponse(xhttp);
    }
  };
  xhttp.open("POST", PHPscript, true);
  xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xhttp.send(postOptions);
  
  return;
}


function parseXMLResponse(xml)
{

  var i;
  var xmlDoc = xml.responseXML;
  var tableBrowser;
  var tableLog;

  //error check for null XML response.
  if(xmlDoc == null)
  {
    IMSError("parseXMLResponse Error","Returned XML Doc is Null");
	return false;    
  }   
  


  //handle xml entries
  var status = xmlDoc.getElementsByTagName("STATUS");
  var browser = xmlDoc.getElementsByTagName("BROWSER");
  var log = xmlDoc.getElementsByTagName("LOG");
  var autoComplete = xmlDoc.getElementsByTagName("QUERY_SUGGEST");
  var quickAccess = xmlDoc.getElementsByTagName("QACCESS");
  var classData = xmlDoc.getElementsByTagName("CLASS_DATA");
  var emailList = xmlDoc.getElementsByTagName("EMAIL_LIST");


  if(status.length > 0)
  {
	var statusCode = status[0].getElementsByTagName("STATUS_CODE")[0].childNodes[0].nodeValue;
	var statusMessage = status[0].getElementsByTagName("STATUS_MESSAGE")[0].childNodes[0].nodeValue;
  
	document.getElementById("status_code").innerHTML = statusCode;
	document.getElementById("status_message").innerHTML = statusMessage;
  
	//check status code and throw and alert if a fail occurred.
	if(statusCode != "0")
	{
	  IMSError("parseXMLResponse Error","Server Error with message:" + statusMessage);
	  return false;
	}
	
  
  }
  else //Bad XML Response format if STATUS is missing
  {
    IMSError("parseXMLResponse Error","Bad XML Response Format");
	return false;	
  }

  
  if(autoComplete.length > 0)
  {
	var autoCompleteList = autoComplete[0].getElementsByTagName("SUGGESTION");	
	var autoCompleteHtml;
	
	//check for null data
    if(autoCompleteList == null)
    {
      IMSError("parseXMLResponse Error","AutoComplete List is NULL");
	  return false;	
    }
	
    for( i = 0; i < autoCompleteList.length; i++)
	{
		autoCompleteHtml += "<option value=\""
		+autoCompleteList[i].getElementsByTagName("Name")[0].childNodes[0].nodeValue 
		+"\" style=\"color:black\">"
		+autoCompleteList[i].getElementsByTagName("Name")[0].childNodes[0].nodeValue 
		+" - "
		+autoCompleteList[i].getElementsByTagName("Type")[0].childNodes[0].nodeValue 
		+" - "
		+autoCompleteList[i].getElementsByTagName("Description")[0].childNodes[0].nodeValue
		+"</option>";
	}	
	
	//Main page search bar.
    document.getElementById("id_search_queryList").innerHTML = autoCompleteHtml;
	
	//Add Class Data Part Number
	document.getElementById("id_cdm_partList").innerHTML = autoCompleteHtml;
  }
  

  if(quickAccess.length > 0)
  {
	//quick access form
	document.getElementById("id_qa_ID").innerHTML = quickAccess[0].getElementsByTagName("Name")[0].childNodes[0].nodeValue;
	document.getElementById("id_qa_Description").innerHTML = quickAccess[0].getElementsByTagName("Description")[0].childNodes[0].nodeValue;
	document.getElementById("id_qa_Quantity").innerHTML = quickAccess[0].getElementsByTagName("Quantity")[0].childNodes[0].nodeValue;
	
	//add item modal dialog
	document.getElementById("id_ivm_itemNumber").value = quickAccess[0].getElementsByTagName("Name")[0].childNodes[0].nodeValue;
	document.getElementById("id_ivm_desc").value = quickAccess[0].getElementsByTagName("Description")[0].childNodes[0].nodeValue;
	document.getElementById("id_ivm_supplierPN").value = quickAccess[0].getElementsByTagName("Supplier_Part_Number")[0].childNodes[0].nodeValue;
	document.getElementById("id_ivm_qty").value = quickAccess[0].getElementsByTagName("Quantity")[0].childNodes[0].nodeValue;
	document.getElementById("id_ivm_location").value = quickAccess[0].getElementsByTagName("Location")[0].childNodes[0].nodeValue;
	document.getElementById("id_ivm_type").value = quickAccess[0].getElementsByTagName("Type")[0].childNodes[0].nodeValue;
	document.getElementById("id_ivm_thresh").value = quickAccess[0].getElementsByTagName("Ordering_Threshold")[0].childNodes[0].nodeValue;
	document.getElementById("id_ivm_value").value = quickAccess[0].getElementsByTagName("Value")[0].childNodes[0].nodeValue;
	document.getElementById("id_ivm_supplierName").value = quickAccess[0].getElementsByTagName("Suppliers_Name")[0].childNodes[0].nodeValue;
	document.getElementById("id_ivm_link").value = quickAccess[0].getElementsByTagName("Item_Link")[0].childNodes[0].nodeValue;

	
  }  
  

  
  if(log.length > 0)
  {
    var log_entry = log[0].getElementsByTagName("LOG_ENTRY");
    //check for null data
    if(log_entry == null)
    {
      IMSError("parseXMLResponse Error","Log List is NULL");
	    return false;	
    }

    var logHeaderLabelDate = "Date";
    var logHeaderLabelSID = "SID";
    var logHeaderLabelPN = "Item Number";
    var logHeaderLabelLevel = "Log Type";
    var logHeaderLabelDescription = "Description";

    /*Add sort stuff here*/

    tableLog = "<table class=\"w3-table w3-bordered w3-border w3-striped w3-hoverable\" style=\"table-layout:fixed; width=100%;\"><tr>" +
            "<col width=\"250\">"+
            "<th class=\"w3-border\" onclick=\"\">"+logHeaderLabelDate+"</th>" +
            "<th class=\"w3-border\" onclick=\"\">"+logHeaderLabelSID+"</th>" + 
            "<th class=\"w3-border\" onclick=\"\">"+logHeaderLabelPN+"</th>" + 
            "<th class=\"w3-border\" onclick=\"\">"+logHeaderLabelLevel+"</th>" + 
            "<th class=\"w3-border\" onclick=\"\">"+logHeaderLabelDescription+"</th>";
			
			
	tableItemLog = tableLog;
	var tableRow = "";
			   
    for( i = 0; i < log_entry.length; i++)
    {
      document.getElementById("log").innerHTML = i;

      tableRow = "<tr>" + 
				  "<td class=\"w3-border\" style=\"word-wrap: break-word\">" + log_entry[i].getElementsByTagName("Date")[0].childNodes[0].nodeValue + "</td>" +
                  "<td class=\"w3-border\" style=\"word-wrap: break-word\">" + log_entry[i].getElementsByTagName("SID")[0].childNodes[0].nodeValue + "</td>" +
                  "<td class=\"w3-border\" style=\"word-wrap: break-word\">" + log_entry[i].getElementsByTagName("Item")[0].childNodes[0].nodeValue + "</td>" +
                  "<td class=\"w3-border\" style=\"word-wrap: break-word\">" + log_entry[i].getElementsByTagName("Level")[0].childNodes[0].nodeValue + "</td>" +
                  "<td class=\"w3-border\" style=\"word-wrap: break-word\">" + log_entry[i].getElementsByTagName("Description")[0].childNodes[0].nodeValue + "</td>" +
                  "</tr>";
 
	  tableLog += tableRow;
 
      var ItemViewPN = document.getElementById("id_ivm_itemNumber").value;
	  if(ItemViewPN != "")
	  {
		var xmlPN = log_entry[i].getElementsByTagName("Item")[0].childNodes[0].nodeValue;
		if(ItemViewPN == xmlPN)
		{
		  tableItemLog += tableRow;
		}
	  }
				  
    }
    tableLog += "</table>";
	tableItemLog += "</table>";
    document.getElementById("log").innerHTML = tableLog;
	document.getElementById("id_ivm_table").innerHTML = tableItemLog;


  }
  

  
  if(browser.length > 0) //Browser section present
  { 
    var browser_entry = browser[0].getElementsByTagName("BROWSER_ENTRY");

    //check for null data
    if(browser_entry == null)
    {
      IMSError("parseXMLResponse Error","Broswer List is NULL");
	    return false;	
    }

    var browserHeaderLabelName = "Name";
    var browserHeaderLabelQuantity = "Quantity";
    var browserHeaderLabelType = "Part Type";
    var browserHeaderLabelValue = "Value";
    var browserHeaderLabelLocation = "Location";
    var browserHeaderLabelPartNumber = "Supplier Part Number";
    var browserHeaderLabelOrderingThreshold = "Ordering Threshold";
    var browserHeaderLabelDescription = "Description";

    /*Add Sort stuff here*/
    
    tableBrowser = "<table class=\"w3-table w3-bordered w3-border w3-striped w3-hoverable\" style=\"table-layout:fixed; width=100%;\"><tr>" +
            "<col width=\"150\">"+
            "<th class=\"w3-border\" onclick=\"\">"+browserHeaderLabelName+"</th>" +
            "<th class=\"w3-border\" onclick=\"\">"+browserHeaderLabelQuantity+"</th>" + 
            "<th class=\"w3-border\" onclick=\"\">"+browserHeaderLabelType+"</th>" + 
            "<th class=\"w3-border\" onclick=\"\">"+browserHeaderLabelValue+"</th>" +
            "<th class=\"w3-border\" onclick=\"\">"+browserHeaderLabelLocation+"</th>" + 
            "<th class=\"w3-border\" onclick=\"\">"+browserHeaderLabelPartNumber+"</th>" + 
            "<th class=\"w3-border\" onclick=\"\">"+browserHeaderLabelOrderingThreshold+"</th>" + 
            "<th class=\"w3-border\" onclick=\"\">"+browserHeaderLabelDescription+"</th></tr>";

    for( i = 0; i < browser_entry.length; i++)
    {

      tableBrowser += "<tr>" + 
                        "<td class=\"w3-border\" style=\"word-wrap: break-word\">" + browser_entry[i].getElementsByTagName("Name")[0].childNodes[0].nodeValue + "</td>" +
                        "<td class=\"w3-border\" style=\"word-wrap: break-word\">" + browser_entry[i].getElementsByTagName("Quantity")[0].childNodes[0].nodeValue + "</td>" +
                        "<td class=\"w3-border\" style=\"word-wrap: break-word\">" + browser_entry[i].getElementsByTagName("Type")[0].childNodes[0].nodeValue + "</td>" +
                        "<td class=\"w3-border\" style=\"word-wrap: break-word\">" + browser_entry[i].getElementsByTagName("Value")[0].childNodes[0].nodeValue + "</td>" +
                        "<td class=\"w3-border\" style=\"word-wrap: break-word\">" + browser_entry[i].getElementsByTagName("Location")[0].childNodes[0].nodeValue + "</td>" +                        
                        "<td class=\"w3-border\" style=\"word-wrap: break-word\">" + browser_entry[i].getElementsByTagName("Supplier_Part_Number")[0].childNodes[0].nodeValue + "</td>" +
                        "<td class=\"w3-border\" style=\"word-wrap: break-word\">" + browser_entry[i].getElementsByTagName("Ordering_Threshold")[0].childNodes[0].nodeValue + "</td>" +
                        "<td class=\"w3-border\" style=\"word-wrap: break-word\">" + browser_entry[i].getElementsByTagName("Description")[0].childNodes[0].nodeValue + "</td>" +
                        "</tr>";
    }

    tableBrowser += "</table>"
    document.getElementById("browser").innerHTML = tableBrowser;	
  } 
  

  
  if(emailList.length > 0)
  { 
    var email_entry = emailList[0].getElementsByTagName("EMAIL_ENTRY");
	var tableEmailList = "";
	
    //check for null data
    if(email_entry == null)
    {
      IMSError("parseXMLResponse Error","Class Data Entry is NULL");
      return false;	
    }    
	
	//Table header
	tableEmailList = "<table class=\"w3-table w3-bordered w3-border w3-striped w3-hoverable\" style=\"table-layout:fixed; width=100%;\"><tr>" +
	        "<col width=\"85%\">"+
			"<col width=\"15%\">"+
            "<th class=\"w3-border\">Email Address</th>" + 
            "<th class=\"w3-border\">Delete</th></tr>";
			

	//table data
	for( i = 0; i < email_entry.length; i++)
    {	
		var id = email_entry[i].getElementsByTagName("Id")[0].childNodes[0].nodeValue;
		var emailAddress = email_entry[i].getElementsByTagName("Recipients")[0].childNodes[0].nodeValue;	
	
		tableEmailList += "<tr onclick=\"elm_loadRow('" + 
						id + "','" +
						emailAddress +
						"')\">" + 
						"<td class=\"w3-border\" style=\"word-wrap: break-word\">" + emailAddress + "</td>" +
						"<td class=\"w3-border\" style=\"word-wrap: break-word\">" + 
						"<button class=\"w3-btn w3-tiny w3-red w3-border w3-round-large\" type=\"button\" "+
						"onclick=\"elm_deleteEmailAddress('"+id+"')\">&times</button></td>" +
                        "</tr>";								
	}

    tableEmailList += "</table>"

	
	document.getElementById("id_elm_table").innerHTML = tableEmailList;

  }  
  
  if(classData.length > 0)
  { 

    var class_entry = classData[0].getElementsByTagName("CLASS_ENTRY");
	
    //check for null data
    if(class_entry == null)
    {
      IMSError("parseXMLResponse Error","Class Data Entry is NULL");
      return false;	
    }
    var headerLabelClass = "Class Name";
    var headerLabelPN = "Part Number";
    var headerLabelQty = "Quantity";
    var headerLabelDate = "Date";
	
    var currentSort = document.getElementById("id_cmd_sortInfo").innerHTML;

	
    if(currentSort != "None")
    {
      var currentSortSplit = currentSort.split(":");
      var currentSortCol = currentSortSplit[0];
      var currentSortDir = currentSortSplit[1];	  
      
	  
      if(currentSortCol == "Class")
      {
		    if(currentSortDir == "ASC")
		    {
		      headerLabelClass = "Class Name&#9650;"; //Arrow up
		    }
		    else
		    {
		      headerLabelClass = "Class Name&#9660;";//Arrow Down
		    }		
      }
	  
      if(currentSortCol == "Part")
      {
		    if(currentSortDir == "ASC")
		    {
		      headerLabelPN = "Part Number&#9650;";
		    }
		    else
		    {
		      headerLabelPN = "Part Number&#9660;";
		    }		
      }
	  
	  
      if(currentSortCol == "Quantity")
      {
		    if(currentSortDir == "ASC")
		    {
		      headerLabelQty = "Quantity&#9650;";
		    }
		    else
		    {
		      headerLabelQty = "Quantity&#9660;";
		    }		
      }
	  
	  
  	  if(currentSortCol == "Date")
   	  {
    		if(currentSortDir == "ASC")
    		{
    		  headerLabelDate = "Date&#9650;";
     		}
  	  	else
    		{
		      headerLabelDate = "Date&#9660;";
    		}		
	    }	
	}

	
	//Table header
	tableClassData = "<table class=\"w3-table w3-bordered w3-border w3-striped w3-hoverable\" style=\"table-layout:fixed; width=100%;\"><tr>" +
			"<col width=\"50\">"+
			"<th class=\"w3-border\">SEL</th>" +
            "<th class=\"w3-border\" onclick=\"cdm_tableSort('Class')\">"+headerLabelClass+"</th>" + 
            "<th class=\"w3-border\" onclick=\"cdm_tableSort('Part')\">"+headerLabelPN+"</th>" + 
            "<th class=\"w3-border\" onclick=\"cdm_tableSort('Quantity')\">"+headerLabelQty+"</th>" +
            "<th class=\"w3-border\" onclick=\"cdm_tableSort('Date')\">"+headerLabelDate+"</th>";
	//table data
	for( i = 0; i < class_entry.length; i++)
    {
	
		var id = class_entry[i].getElementsByTagName("Id")[0].childNodes[0].nodeValue;
		var className = class_entry[i].getElementsByTagName("Class")[0].childNodes[0].nodeValue;
		var part = class_entry[i].getElementsByTagName("Part")[0].childNodes[0].nodeValue;
		var qty = class_entry[i].getElementsByTagName("Quantity")[0].childNodes[0].nodeValue;
		var date = class_entry[i].getElementsByTagName("Date")[0].childNodes[0].nodeValue;
	
	
		tableClassData += "<tr onclick=\"cdm_loadRow('" + 
						id + "','" +
						className + "','" +
						part + "','" +
						qty + "','" +
						date +
						"')\">" + 
						"<td class=\"w3-border\" style=\"word-wrap: break-word\"><input class=\"w3-check\" type=\"checkbox\" "+
						"id=\"id_cdm_checkbox" + i + "\" " +
						"onchange=\"cdm_selCheck(this.id,'"  + id + "')\"></input></td>" +
						"<td class=\"w3-border\" style=\"word-wrap: break-word\">" + className + "</td>" +
                        "<td class=\"w3-border\" style=\"word-wrap: break-word\">" + part + "</td>" +
                        "<td class=\"w3-border\" style=\"word-wrap: break-word\">" + qty + "</td>" +
                        "<td class=\"w3-border\" style=\"word-wrap: break-word\">" + date + "</td>" +                   
                        "</tr>";								
	}

    tableClassData += "</table>"

	
	document.getElementById("id_cdm_table").innerHTML = tableClassData;

  }  
  

  return true; 
  
}

/****************************************************************
Function:  cdm_autoPN()
Description: Generates an Item Number suggestion based on form 
inputs.
*****************************************************************/
function cdm_autoPN()
{

  var partNumber = "";
  if(document.getElementById("id_cvm_type").value != "")
  {
	switch(document.getElementById("id_cvm_type").value)
	{
	  case "Capacitor":
		partNumber = "C";
		break;
	  case "Resistor":
		partNumber = "R";
		break;
	  case "Inductor":
		partNumber = "I";
		break;
	  case "Equipment":
		partNumber = "E";
		break;
	  case "Transistor":
		partNumber = "Q";
		break;
	  case "Transformer":
		partNumber = "T";
		break;
	  default:
		partNumber = "O";
		break;
	}
	
  }
  
  if(document.getElementById("id_cvm_value").value != "")
  {
	partNumber += document.getElementById("id_cvm_value").value;
  }
  else
  {
	partNumber += "XXX";
  }
  
  partNumber += "-01";
  document.getElementById("id_cvm_itemNumber").value = partNumber;
  return;
}

/****************************************************************
Function:  cdm_tableSort()
Description: Sorts the class data table based on clicked header.
*****************************************************************/
function cdm_tableSort(column)
{ 

  var sortDir = "ASC";
  
  var currentSort = document.getElementById("id_cmd_sortInfo").innerHTML;
  
  if(currentSort != "None")
  {
	var currentSortSplit = currentSort.split(":");
	var currentSortCol = currentSortSplit[0];
	var currentSortDir = currentSortSplit[1];
	
	if(currentSortCol == column)
	{
	  if(currentSortDir == "ASC")
		sortDir = "DESC";
	  else
	    sortDir = "ASC";
	}
	else
	{
	  sortDir = "ASC";
	}
  
  }

  sendBackendRequest("RetrieveClassData.php","SID="+getSID()+"&SortColumn="+column+"&SortDirection="+sortDir);
  
  document.getElementById("id_cmd_sortInfo").innerHTML = column + ":"+sortDir;  
}

/****************************************************************
Function:  cdm_loadRow()
Description: Loads a row of data into the edit box.
*****************************************************************/
function cdm_loadRow(id,className,part,qty,date)
{
	document.getElementById("id_cdm_idDisplay").innerHTML = id;

	document.getElementById("id_cdm_classInput").value = className;
	document.getElementById("id_cdm_classInputOrginal").innerHTML = className;

	document.getElementById("id_cdm_PNInput").value = part;
	document.getElementById("id_cdm_PNInputOrginal").innerHTML = part;

	document.getElementById("id_cdm_qtyInput").value = qty;
	document.getElementById("id_cdm_qtyInputOrginal").innerHTML = qty;

	document.getElementById("id_cdm_dateInput").value = date;
	document.getElementById("id_cdm_dateInputOrginal").innerHTML = date;

	document.getElementById("id_cdm_modifyBtn").disabled = false;

	return;
}

/****************************************************************
Function:  cdm_clearEdit()
Description: Clears the edit box if a row is loaded into it.
*****************************************************************/
function cdm_clearEdit()
{
	if(document.getElementById("id_cdm_idDisplay").innerHTML != "New")
	{
		document.getElementById("id_cdm_idDisplay").innerHTML = "New";
		document.getElementById("id_cdm_classInput").value = "";
		document.getElementById("id_cdm_PNInput").value = "";
		document.getElementById("id_cdm_qtyInput").value = "";
		document.getElementById("id_cdm_dateInput").value = "";	
		
        document.getElementById("id_cdm_partList").innerHTML = "";

		document.getElementById("id_cdm_modifyBtn").disabled = true;

	}
	
	return;
}

/****************************************************************
Function:  cdm_deleteClassDataEntry()
Description: Deletes a selected class data entry from the database.
*****************************************************************/
function cdm_deleteClassDataEntry()
{
	var id = document.getElementById("id_cdm_idDisplay").innerHTML;
	var sortCommand ="";
	if(id != "New")
	{
		var currentSort = document.getElementById("id_cmd_sortInfo").innerHTML;
		if(currentSort != "None")
		{
			var currentSortSplit = currentSort.split(":");
			var currentSortCol = currentSortSplit[0];
			var currentSortDir = currentSortSplit[1];
			
			sortCommand = "&SortColumn="+currentSortCol+"&SortDirection="+currentSortDir;
			
		}	
		
		sendBackendRequest("DeleteClassData.php","SID="+getSID()+"&ID="+id+sortCommand);
	}
	else
	{
		IMSError("cdm_deleteClassDataEntry Error","No Class data record selected.");
	    return false;	
	}
	
	return;
}

/****************************************************************
Function:  cdm_deleteSelClassDataEntry()
Description: Deletes all check entries in the class data form.
*****************************************************************/
function cdm_deleteSelClassDataEntry()
{
	var idList = document.getElementById("id_cdm_deletionList").innerHTML;
	var sortCommand ="";
	if(idList != "None")
	{
		var currentSort = document.getElementById("id_cmd_sortInfo").innerHTML;
		if(currentSort != "None")
		{
			var currentSortSplit = currentSort.split(":");
			var currentSortCol = currentSortSplit[0];
			var currentSortDir = currentSortSplit[1];
			
			sortCommand = "&SortColumn="+currentSortCol+"&SortDirection="+currentSortDir;				
		}	
	
		idListSplit = idList.split(",");
		for(i=0;i<idListSplit.length;i++)
		{		
			sendBackendRequest("DeleteClassData.php","SID="+getSID()+"&ID="+idListSplit[i]+sortCommand);
		}
		document.getElementById("id_cdm_deletionList").innerHTML = "None";
		
	}
	else
	{
		IMSError("cdm_deleteSelClassDataEntry Error","No Class data records selected.");
	    return;	
	}
	
	return;
}

/****************************************************************
Function:  cdm_addClassDataEntry()
Description: Sends new class data to the server to be saved.
*****************************************************************/
function cdm_addClassDataEntry()
{

  var className = document.getElementById("id_cdm_classInput").value;
  var partNumber = document.getElementById("id_cdm_PNInput").value;
  var qty = document.getElementById("id_cdm_qtyInput").value;
  var date = document.getElementById("id_cdm_dateInput").value;
  var sortCommand = "";
  
  var currentSort = document.getElementById("id_cmd_sortInfo").innerHTML;
  if(currentSort != "None")
  {
	var currentSortSplit = currentSort.split(":");
	var currentSortCol = currentSortSplit[0];
	var currentSortDir = currentSortSplit[1];
	
	sortCommand = "&SortColumn="+currentSortCol+"&SortDirection="+currentSortDir;	
  }	  

  sendBackendRequest("AddNewClassData.php","SID="+getSID()+"&Class="+className+"&PartNumber="+partNumber+"&Quantity="+qty+"&Date="+date+sortCommand);
  
  //clear entries
  document.getElementById("id_cdm_idDisplay").innerHTML = "New";
  document.getElementById("id_cdm_classInput").value = "";
  document.getElementById("id_cdm_PNInput").value = "";
  document.getElementById("id_cdm_qtyInput").value = "";
  document.getElementById("id_cdm_dateInput").value = "";	
  document.getElementById("id_cdm_partList").innerHTML = "";
  
  return;
}

/****************************************************************
Function:  cdm_modifyClassDataEntry()
Description: Modifies an existing class data record.
*****************************************************************/
function cdm_modifyClassDataEntry()
{
	var id = document.getElementById("id_cdm_idDisplay").innerHTML;
	var sortCommand = "";
	
	if(id != "New")
	{
		var currentSort = document.getElementById("id_cmd_sortInfo").innerHTML;
		if(currentSort != "None")
		{
			var currentSortSplit = currentSort.split(":");
			var currentSortCol = currentSortSplit[0];
			var currentSortDir = currentSortSplit[1];
			
			sortCommand = "&SortColumn="+currentSortCol+"&SortDirection="+currentSortDir;	
		}	
	
	
		var class_new = document.getElementById("id_cdm_classInput").value;
		var class_old = document.getElementById("id_cdm_classInputOrginal").innerHTML;

		var PN_new = document.getElementById("id_cdm_PNInput").value;
		var PN_old = document.getElementById("id_cdm_PNInputOrginal").innerHTML;

		var qty_new = document.getElementById("id_cdm_qtyInput").value;
		var qty_old = document.getElementById("id_cdm_qtyInputOrginal").innerHTML;

		var date_new = document.getElementById("id_cdm_dateInput").value;
		var date_old = document.getElementById("id_cdm_dateInputOrginal").innerHTML;
		
		if(	class_new != class_old)
		{
			sendBackendRequest("ModifyClassData.php","SID="+getSID()+"&ID="+id+"&Field=Class&Value="+class_new+sortCommand);
			document.getElementById("id_cdm_classInputOrginal").innerHTML = class_new;
		}
		if(	PN_new != PN_old)
		{
			sendBackendRequest("ModifyClassData.php","SID="+getSID() + "&ID="+id+"&Field=Part&Value="+PN_new+sortCommand);
			document.getElementById("id_cdm_PNInputOrginal").innerHTML = PN_new;
		}
		if(	qty_new != qty_old)
		{
			sendBackendRequest("ModifyClassData.php","SID="+getSID() + "&ID="+id+"&Field=Quantity&Value="+qty_new+sortCommand);
			document.getElementById("id_cdm_qtyInputOrginal").innerHTML = qty_new;
		}
		if(	date_new != date_old)
		{
			sendBackendRequest("ModifyClassData.php","SID="+getSID() + "&ID="+id+"&Field=Date&Value="+date_new+sortCommand);
			document.getElementById("id_cdm_dateInputOrginal").innerHTML = date_new;
		}

	}
	else
	{
		IMSError("cdm_modifyClassDataEntry Error","No record selected to modify.");
	}
	return;
}

/****************************************************************
Function:  cdm_getClassData()
Description: Sends a request to the server to retrieve the Class 
Data information for display.
*****************************************************************/
function cdm_getClassData()
{
  sendBackendRequest("RetrieveClassData.php","SID="+getSID());	
}

/****************************************************************
Function:  cdm_showPNAutocomplete()
Description: Creates a datalist to show all autocomplete matches
for a partial search string.
*****************************************************************/
function cdm_showPNAutocomplete(partialStr)
{


  //Check for a selection	
  //from http://stackoverflow.com/questions/30022728/perform-action-when-clicking-html5-datalist-option
  var val = document.getElementById("id_cdm_PNInput").value;
  var opts = document.getElementById('id_cdm_partList').childNodes;
  
  if(val == "") //blank or removed entry, delete the datalist.
  {
    document.getElementById("id_cdm_partList").innerHTML = "";
	return;
  }
  
  for (var i = 0; i < opts.length; i++) 
  {
	if (opts[i].value === val) 
	{
	// An item was selected from the list!
	//remove datalists
	document.getElementById("id_cdm_partList").innerHTML = "";
    document.getElementById("id_search_queryList").innerHTML = "";
	return;
	}
  }
  
  sendBackendRequest("QueryAutocomplete.php","SID="+getSID()+"&Filter="+ partialStr);
  return;
}


/****************************************************************
Function:  cdm_selCheck()
Description: Adds and deletes an ID from the delete selection string
based on checking and unchecking a box.
*****************************************************************/
function cdm_selCheck(checkboxID,recordID)
{
	var selState = document.getElementById(checkboxID).checked;
	var currentList = document.getElementById("id_cdm_deletionList").innerHTML;
	var newList = "None";

	if(selState) //Add
	{
		if(currentList == "None")
		{
			newList = recordID;
		}
		else
		{
			newList = currentList;
			newList += "," + recordID;
		}
	}
	else //Delete
	{
		splitArray = currentList.split(",");
		
		index = splitArray.indexOf(recordID);
		splitArray.splice(index,1);
		
		if(splitArray.length != 0)
		{
			newList = "";		
			for(i=0;i < splitArray.length;i++)
			{			
				newList += splitArray[i];
				if(i != splitArray.length-1)
				{
					newList += ",";
				}		
			}
		}
	}
	
    document.getElementById("id_cdm_deletionList").innerHTML = newList;

}




/****************************************************************
Function:  ivm_modifyItem(type)
Description: Modifies a field for the currently loaded item.
*****************************************************************/
function ivm_modifyItem(id,field)
{
  var itemNumber = document.getElementById("id_ivm_itemNumber").value;
  var value = "";

  if(itemNumber == "") // nothing loaded.
  {
	return;
  }  	
  value = document.getElementById(id).value;		
	
  sendBackendRequest("ModifyItem.php","SID="+getSID()+"&PartNumber="+ itemNumber + "&Field="+field + "&Value=" + value);
  return;

}


/****************************************************************
Function:  IMSError()
Description: Launches an error modal dialog box. 
*****************************************************************/
function IMSError(title,message)
{
  document.getElementById('id_iem_title').innerHTML = title;
  document.getElementById('id_iem_message').innerHTML = message;
  document.getElementById('IMSErrorModal').style.display='block';
  
  return;
}



/****************************************************************
Function:  elm_getEmailList()
Description: Sends a request to the server to retrieve the email
list for display.
*****************************************************************/
function elm_getEmailList()
{
  sendBackendRequest("RetrieveEmailAddress.php","SID="+getSID());	
}

/****************************************************************
Function:  elm_loadRow()
Description: Loads a row of data into the edit box.
*****************************************************************/
function elm_loadRow(id,email)
{
	document.getElementById("id_elm_idDisplay").innerHTML = id;

	document.getElementById("id_elm_emailAddress").value = email;
	document.getElementById("id_elm_emailAddressOriginal").innerHTML = email;

	document.getElementById("id_elm_modifyBtn").disabled = false;

	return;
}


/****************************************************************
Function:  elm_modifyEmailEntry()
Description: Modifies an existing email record.
*****************************************************************/
function elm_modifyEmailEntry()
{
	var id = document.getElementById("id_elm_idDisplay").innerHTML;
	
	if(id != "New")
	{
		var email_new = document.getElementById("id_elm_emailAddress").value;
		var email_old = document.getElementById("id_elm_emailAddressOriginal").innerHTML;
				
		if(	email_new != email_old)
		{
			sendBackendRequest("ModifyEmailAddress.php","SID="+getSID()+"&ID="+id+"&Field=Recipients&Value="+email_new);
			document.getElementById("id_elm_emailAddressOriginal").innerHTML = email_new;
		}		
	}
	else
	{
		IMSError("elm_modifyEmailEntry Error","No record selected to modify.");
	}
	return;
}


/****************************************************************
Function:  elm_addEmailEntry()
Description: Adds a new Email entry to the email list.
*****************************************************************/
function elm_addEmailEntry()
{

  var email = document.getElementById("id_elm_emailAddress").value;  

  sendBackendRequest("AddEmailAddress.php","SID="+getSID()+"&Email="+email);
  
  //clear entries
  document.getElementById("id_elm_idDisplay").innerHTML = "New";
  document.getElementById("id_elm_emailAddress").value = "";
  document.getElementById("id_elm_emailAddressOriginal").innerHTML = "";
  
  return;
}

/****************************************************************
Function:  elm_deleteEmailAddress(id)
Description: Deletes a selected email address from the database.
*****************************************************************/
function elm_deleteEmailAddress(id)
{		
  sendBackendRequest("DeleteEmailAddress.php","SID="+getSID()+"&ID="+id);
	
  return;
}


</script>

</head>
<body onload="populateForms()">

<nav class="w3-sidenav w3-blue" style="width:15%">
  <header class="w3-container">
  </header>
  <a onclick="document.getElementById('ItemCreateModal').style.display='block'">Add Item</a>
  <a onclick="document.getElementById('ItemViewModal').style.display='block'">Edit Item</a>
  <a>Settings</a>   
  <a onclick="IMSError('Test Error Title','Test Error Message')">Test Error Message</a> 
  <a>Alerts</a>
  <a onclick="document.getElementById('ClassDataModal').style.display='block'">Class Data</a> 
  <a href="ShoppingList.html">Shopping List</a> 
  <a onclick="document.getElementById('EmailListModal').style.display='block'">Email List</a> 
  <br> 
  <div style="padding-left:5%">Quick Update:</div>
  <span style="padding-left:5%"><textarea type="text" rows="1" style="width: 13vw;" maxlength="18" id="id_qa_ID" name="quickID" placeholder="PartID"></textarea></span>
  <span style="padding-left:5%"><textarea type="text" rows="1" style="width: 13vw;" maxlength="18" id="id_qa_Quantity" name="quickQuantity" placeholder="Quantity"></textarea></span> 
  <span style="padding-left:5%"><textarea type="text" rows="6" style="width: 13vw;" maxlength="115" id="id_qa_Description" name="quickDescription" placeholder="Description"></textarea></span> 
  <span style="padding-left:5%"><button class='button' type='button'>Update</button></span>
</nav>

<div class="w3-container w3-blue" style="margin-left:15%">
<form class="w3-form">
  <div class="w3-group">
  <a>SID:</a>
  <a id="id_main_SIDDisplay"></a>
  <br>
	<form>
	<font size="3">Search:</font><br>
	<input list="id_search_queryList" type="text" id="id_search_bar" name="search" oninput="search_showAutocomplete(this.value)">
	<datalist id="id_search_queryList">
	</datalist>
	<!-- <a class='button'>Search</a> -->
	<a href='AdvancedSearch.html' class='button'>Advanced Search</a>
	</form>
  </div>
</form>
</div>

<div class="w3-container" style="margin-left:15%">
  <h2>Browser</h2>
  <span style="padding-left:2px"></span>
  <button class="w3-btn w3-blue w3-border w3-round-large" type="button" onclick="loadBrowser()">Refresh</button>
  <br><br>
  <div id="browser" class="w3-responsive w3-white" style="max-height: 22vh;">
  </div>
</div>

<div class="w3-container" style="margin-left:15%">
  <h2>Log</h2>
  <button class="w3-btn w3-blue w3-border w3-round-large" type="button" onclick="loadLog()">Refresh</button>
  <br><br>
  <div id="log" class="w3-responsive w3-white" style="max-height: 22vh;">
  </div>
</div>div>
<br>

<footer class="w3-container w3-blue w3-row" style="margin-left:15%">
  <div class="w3-container w3-third w3-red">
    <p id="status_code"></p>
  </div>
  <div class="w3-container w3-twothird w3-teal">
    <p id="status_message"></p>
  </div>
</footer>


<!-- Modal Dialog box for Creating an Item -->
<div id="ItemCreateModal" class="w3-modal">
  <div class="w3-modal-content w3-blue" style="width:95%">
    <div class="w3-container">
	<header class="w3-container w3-blue">	  
      <span onclick="document.getElementById('ItemCreateModal').style.display='none'" 
      class="w3-closebtn">&times;</span>
	  <h3>Add Item</h3>
	 </header>
      <form class="w3-container">
	  
	    <div class="w3-container w3-half">
		  <select class="w3-select w3-border" name="option" id="id_cvm_type" onchange="cdm_autoPN()">
			<option value="" disabled selected>Select Type</option>
			<option value="Capacitor">Capacitor</option>
			<option value="Resistor">Resistor</option>
			<option value="Inductor">Inductor</option>
			<option value="Equipment">Equipment</option>
			<option value="Transistor">Transistor</option>
			<option value="Transformer">Transformer</option>
			<option value="Other">Other</option>
		  </select>
		  <label>Type</label>
		</div>
		
		<div class="w3-container w3-half">
		  <input class="w3-input w3-border w3-text-black" type="text" id="id_cvm_value" oninput="cdm_autoPN()">
		  <label>Value</label>
		  <p>
		</div>
		
		<div class="w3-container">
		  <input class="w3-input w3-border w3-text-black" type="text" id="id_cvm_desc">
		  <label>Description</label>
		  <p>
		</div>	

		<div class="w3-container w3-half">
		  <input class="w3-input w3-border w3-text-black" type="text" id="id_cvm_supplierPN">
		  <label>Supplier Part Number</label>
		  <p>
		</div>		

		<div class="w3-container w3-half">
		  <input class="w3-input w3-border w3-text-black" type="text" id="id_cvm_supplierName">
		  <label>Supplier Name</label>
		  <p>
		</div>
		
		<div class="w3-container">
		  <input class="w3-input w3-border w3-text-black" type="text" id="id_cvm_link">
		  <label>Document URL</label>
		  <p>
		</div>

		<div class="w3-container w3-quarter">
		  <input class="w3-input w3-border w3-text-black" type="text" id="id_cvm_qty">
		  <label>Quantity</label>
		  <p>
		</div>
		
		<div class="w3-container w3-quarter">
		  <input class="w3-input w3-border w3-text-black" type="text" id="id_cvm_thresh">
		  <label>Threshold</label>
		  <p>
		</div>
		
		<div class="w3-container w3-half">
		  <input class="w3-input w3-border w3-text-black" type="text" id="id_cvm_location">
		  <label>Location</label>
		  <p>
		</div>
		
		<div class="w3-container">
		  <input class="w3-input w3-border w3-text-black" type="text" id="id_cvm_itemNumber">
		  <label>Item Number</label>
		  <p>
		</div>
		
		
		<button class="w3-btn w3-light-green w3-border w3-round-large" type="button" onclick="createNewItem()">Create Item</button>
		<p>
		
		<footer class="w3-container w3-blue w3-row">
		  <p></p>
		</footer>
		
	  </form>
    </div>
  </div>
</div>


<!-- Modal Dialog box for Viewing Editing Single Item -->
<div id="ItemViewModal" class="w3-modal">
  <div class="w3-modal-content w3-blue" style="width:95%">
    <div class="w3-container">
	<header class="w3-container w3-blue">	  
      <span onclick="document.getElementById('ItemViewModal').style.display='none'" 
      class="w3-closebtn">&times;</span>
	  <h3>Edit Item</h3>
	 </header>
      <form class="w3-container">
	  
	    <div class="w3-container">
		  <input class="w3-input w3-border w3-text-black" type="text" id="id_ivm_itemNumber" disabled>
		  <label>Item Number</label>
		  <p>
		</div>	
		
	    <div class="w3-container w3-half">
		  <select class="w3-select w3-border" name="option" id="id_ivm_type">
			<option value="" disabled selected>Select Type</option>
			<option value="Capacitor">Capacitor</option>
			<option value="Resistor">Resistor</option>
			<option value="Inductor">Inductor</option>
			<option value="Equipment">Equipment</option>
			<option value="Transistor">Transistor</option>
			<option value="Transformer">Transformer</option>
			<option value="Other">Other</option>
		  </select>
		  <label>Type</label>
		</div>
		
		<div class="w3-container w3-half">
		  <input class="w3-input w3-border w3-text-black" type="text" id="id_ivm_value" onchange="ivm_modifyItem(this.id,'Value')">
		  <label>Value</label>
		  <p>
		</div>
		
		<div class="w3-container">
		  <input class="w3-input w3-border w3-text-black" type="text" id="id_ivm_desc" onchange="ivm_modifyItem(this.id,'Description')">
		  <label>Description</label>
		  <p>
		</div>	

		<div class="w3-container w3-half">
		  <input class="w3-input w3-border w3-text-black" type="text" id="id_ivm_supplierPN" onchange="ivm_modifyItem(this.id,'Supplier_Part_Number')">
		  <label>Supplier Part Number</label>
		  <p>
		</div>		

		<div class="w3-container w3-half">
		  <input class="w3-input w3-border w3-text-black" type="text" id="id_ivm_supplierName" onchange="ivm_modifyItem(this.id,'Suppliers_Name')">
		  <label>Supplier Name</label>
		  <p>
		</div>
		
		<div class="w3-container">
		  <input class="w3-input w3-border w3-text-black" type="text" id="id_ivm_link" onchange="ivm_modifyItem(this.id,'Item_Link')">
		  <label>Document URL</label>		  <p>
		</div>

		<div class="w3-container w3-quarter">
		  <input class="w3-input w3-border w3-text-black" type="text" id="id_ivm_qty" onchange="ivm_modifyItem(this.id,'Quantity')">
		  <label>Quantity</label>		
		</div>
		
		<div class="w3-container w3-quarter">
		  <input class="w3-input w3-border w3-text-black" type="text" id="id_ivm_thresh" onchange="ivm_modifyItem(this.id,'Ordering_Threshold')">
		  <label>Threshold</label>		  
		</div>
		
		<div class="w3-container w3-half">
		  <input class="w3-input w3-border w3-text-black" type="text" id="id_ivm_location" onchange="ivm_modifyItem(this.id,'Location')">
		  <label>Location</label>		 
		</div>		
			
		<div class="w3-container">
		<p/>
		</div>
		
		<div id="id_ivm_table" class="w3-responsive w3-white" style="max-height: 30vh;">
		</div>		
		<footer class="w3-container w3-blue w3-row">
		  <p></p>
		</footer>
		
	  </form>
    </div>
  </div>
</div>

<!-- Class Data Modal Dialog Box -->
<div id="ClassDataModal" class="w3-modal">
  <div class="w3-modal-content w3-blue" style="width:95%">
    <div class="w3-container">
	<header class="w3-container w3-blue">
      <span onclick="document.getElementById('ClassDataModal').style.display='none'" 
      class="w3-closebtn">&times;</span>
	  <h3>Class Data</h3>
	</header>
	<div id="id_cmd_sortInfo" style="display: none;">None</div>
	<div id="id_cdm_deletionList" style="display: none;">None</div>
	<div id="id_cdm_table" class="w3-responsive w3-white" style="max-height: 50vh;">
	</div>
	 
	<div class="w3-container">
		<a>ID:</a>
		<a id="id_cdm_idDisplay">New</a>
	</div>
	<form class="w3-container">
	<div class="w3-container w3-quarter">
		<input class="w3-input w3-border w3-text-black" type="text" id="id_cdm_classInput" placeholder="" onclick="">
		<label>Class</label>
	</div>
	<div id="id_cdm_classInputOrginal" style="display: none;"></div>

	<div class="w3-container w3-quarter">
		<input list="id_cdm_partList" class="w3-input w3-border w3-text-black" type="text" id="id_cdm_PNInput" placeholder="" oninput="cdm_showPNAutocomplete(this.value)" onclick="">
		<datalist id="id_cdm_partList">
		</datalist>
		<label>Part Number</label>
	</div>
	<div id="id_cdm_PNInputOrginal" style="display: none;"></div>

	<div class="w3-container w3-quarter">
		<input class="w3-input w3-border w3-text-black" type="text" id="id_cdm_qtyInput" placeholder="" onclick="">
		<label>Quantity Needed</label>
	</div>
	<div id="id_cdm_qtyInputOrginal" style="display: none;"></div>

	<div class="w3-container w3-quarter">
		<input class="w3-input w3-border w3-text-black" type="text" id="id_cdm_dateInput" placeholder="" onclick="">
		<label>Date Needed</label>
	</div>
	<div id="id_cdm_dateInputOrginal" style="display: none;"></div>

	<p/>	
	<button class="w3-btn w3-light-green w3-border w3-round-large" type="button" onclick="cdm_addClassDataEntry()">Add Class Data</button>
	<button class="w3-btn w3-light-green w3-border w3-round-large" type="button" onclick="cdm_modifyClassDataEntry()" id="id_cdm_modifyBtn" disabled>Modify Class Data</button>
	<button class="w3-btn w3-red w3-border w3-round-large" type="button" onclick="cdm_deleteSelClassDataEntry()">Delete Selected</button>
	<p/>
	</form>  
	<footer class="w3-container w3-blue w3-row">
		<p/>
	</footer>  
    </div>
  </div>
</div>

<!-- Email List Modal Dialog Box -->
<div id="EmailListModal" class="w3-modal">
  <div class="w3-modal-content w3-blue" style="width:75%">
    <div class="w3-container">
	<header class="w3-container w3-blue">
      <span onclick="document.getElementById('EmailListModal').style.display='none'" 
      class="w3-closebtn">&times;</span>
	  <h3>Class Data</h3>
	</header>
	<div id="id_elm_table" class="w3-responsive w3-white" style="max-height: 50vh;">
	</div>
	 
	<div class="w3-container">
		<a>ID:</a>
		<a id="id_elm_idDisplay">New</a>
	</div>
	<form class="w3-container">
	<div class="w3-container ">
		<input class="w3-input w3-border w3-text-black" type="text" id="id_elm_emailAddress" placeholder="something@somewhere.com" onclick="">
		<label>Email Address</label>
	</div>
	<div id="id_elm_emailAddressOriginal" style="display: none;"></div>

	<p/>	
	<button class="w3-btn w3-light-green w3-border w3-round-large" type="button" onclick="elm_addEmailEntry()">Add Email Address</button>
	<button class="w3-btn w3-light-green w3-border w3-round-large" type="button" onclick="elm_modifyEmailEntry()" id="id_elm_modifyBtn" disabled>Modify Email Address</button>
	<p/>
	</form>  
	<footer class="w3-container w3-blue w3-row">
		<p/>
	</footer>  
    </div>
  </div>
</div>

<!-- Log Browser Modal -->


<!-- IMS Error Modal Dialog Box -->
<div id="IMSErrorModal" class="w3-modal">
  <div class="w3-modal-content w3-blue" style="width:70%">
    <div class="w3-container">
	<header class="w3-container w3-blue">
      <span onclick="document.getElementById('IMSErrorModal').style.display='none'" 
      class="w3-closebtn">&times;</span>
	  <h3 id="id_iem_title">IMS Error</h3>
	</header>
	<p id="id_iem_message" class="w3-text-black">Error Message</p>
	<button class="w3-btn w3-red w3-border w3-round-large" type="button" onclick="document.getElementById('IMSErrorModal').style.display='none'">OK</button>
	<footer class="w3-container w3-blue w3-row">
		<p/>
	</footer>  
    </div>
  </div>
</div>

         
</body>
</html>